//////////////////////// ################################
////////////////////////
// Suggestions for sign up topic field
////////////////////////
//////////////////////// ################################

var elt = $('#rtopics');
elt.tagsinput({
    tagClass: function(item) {
        switch (item.type) {
            case 'org'     : return 'label label-success';
            case 'topic'     : return 'label label-primary';
            default     : return 'label label-warning';
        }
    },
    itemValue: 'value',
    itemText: 'text',
    typeaheadjs: {
        name: 'userinterests',
        displayKey: 'text',
        source: suggestions.ttAdapter(),
        limit: Infinity,
        templates: {
            empty: 'not found', //optional
            suggestion: function(item){
                var $parent_div = $('<div>');

                $parent_div.addClass('auto-comp-parent')
                if (item.image != ''){
                    $parent_div.append($("<img class='auto-comp-img'/>").attr({src: item.image}));
                    $parent_div.append( "<div class='auto-comp-principal'>" + item.text.replace("company: ", "")+"</div>" )
                    $parent_div.append( "<div class='auto-comp-secun'>" +'Org' + "</div>" )
                } else{
                    $parent_div.append( "<div class='auto-comp-principal'>" + item.text+"</div>" )
                    $parent_div.append( "<div class='auto-comp-secun'>" +'Topic' + "</div>" )
                }

                return $parent_div
            }
        }
    }
});

elt.tagsinput('add', { "value": 1 , "text": "What are your interests?", "type": "Suggestion"});

$('#rtopics').on('beforeItemAdd', function(event) {
    elt.tagsinput('remove', { "value": 1 , "text": "What are your interests?", "type": "Suggestion"});
    // tt-input is the input generated by tagsinput js fw
    // $(".tt-input").attr("placeholder", "more? ");
});